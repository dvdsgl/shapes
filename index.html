<!DOCTYPE html>
<html lang="en">
<head>
	<title>ACE in Action</title>
	<style type="text/css" media="screen">
		#editor { 
			position: absolute;
			top: 30px;
			bottom: 0;
			left: 0;
			width: 750px;
			font-size: 16px;
		}
		#canvas {
			position: absolute;
			top: 30px;
			bottom: 0;
			left: 750px;
			width: 750px;
			padding-left: 40px;
			font-family: monospace;
		}
	</style>
</head>
<body>

	<div id="controls">
		<a class="run" href="#">Run</a>
	</div>

	<div id="editor">shape = ellipse(10, 10, 100, 100)</div>

	<div id="canvas">
	</div>

	<script type="text/javascript" src="ace-builds/src-noconflict/ace.js" charset="utf-8"></script>
	<script>
		window.editor = ace.edit("editor");
		editor.setTheme("ace/theme/monokai");
		editor.getSession().setMode("ace/mode/coffee");
	</script>

	<script type="text/javascript" src="js/jquery-2.0.0.min.js"></script>
	<script type="text/javascript" src="js/coffee-script.js"></script>
	<script type="text/coffeescript" src="js/shapes.coffee"></script>

	<script type="text/coffeescript">
		shapelib = null
		$.get "js/shapes.coffee", (data) -> shapelib = data

		$ ->
			$("#controls .run").click (e) ->
				e.preventDefault()

				program = [
					shapelib,
					editor.getSession().getValue(),
					"shape"
				].join("\n")

				shape = CoffeeScript.eval program
				$("#canvas").text JSON.stringify shape
	</script>
</body>
</html>
